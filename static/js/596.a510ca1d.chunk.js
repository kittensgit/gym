"use strict";(self.webpackChunkgym=self.webpackChunkgym||[]).push([[596],{3277:(e,a,t)=>{t.d(a,{j:()=>s});const s=t(3003).wA},4596:(e,a,t)=>{t.r(a),t.d(a,{default:()=>T});var s=t(5043),n=t(3216),i=t(6032),r=t(528),l=t(5475),o=t(6293),c=t(2227);const A="ProfileContent_wrapper__2S7fH",d="ProfileContent_profile__cFVoj",u="ProfileContent_profile_content__N6l1u",g="ProfileContent_info__AVQA3",m="ProfileContent_avatarContainer__o4hVw",x="ProfileContent_ava__YjBBo",j="ProfileContent_ava_edit__yUCAu",v="ProfileContent_plusIcon__fRyQC",C="ProfileContent_info_content__1WkuB",f="ProfileContent_btns__i6K4j",h="ProfileContent_edit__ZHl-v",_="ProfileContent_logout__BSnM9",w="ProfileContent_about__czzpu",p="ProfileContent_text__3kLJ2",E="ProfileContent_btn__xaALg",B="ProfileContent_input__22-h4",N="ProfileContent_textarea__9R4TV",I="ProfileContent_links__hhP15",b="ProfileContent_active__2N19s";var P=t(579);const Q=e=>{let{userId:a,username:t,isLoading:i,userProfileData:r,isEdit:Q,avatarUrl:U,isUploading:D,uploadAvatarInStorage:y,updateUser:T,toggleEdit:Y,addUserInfoToFirebase:H,onLogOut:J}=e;const{pathname:z}=(0,n.zy)(),L=(0,s.useRef)(null),O=e=>{const{name:a,value:t}=e.target;T(a,t)};return(0,P.jsx)("div",{className:A,children:(0,P.jsx)("div",{className:"container",children:(0,P.jsxs)("div",{className:d,children:[(0,P.jsxs)("div",{className:g,children:[(0,P.jsxs)("div",{className:C,children:[(0,P.jsx)("div",{className:m,onClick:()=>{var e;return Q&&(null===(e=L.current)||void 0===e?void 0:e.click())},children:i||D?(0,P.jsx)(o.A,{}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("img",{className:Q?x+" "+j:x,src:U||c,alt:"avatar"}),Q&&(0,P.jsx)("div",{className:v})]})}),(0,P.jsx)("input",{ref:L,onChange:e=>{var a;const t=null===(a=e.target.files)||void 0===a?void 0:a[0];t&&y(t)},type:"file",hidden:!0}),Q?(0,P.jsxs)("div",{className:w,children:[(0,P.jsx)("h1",{children:t.split(" ").map(((e,a)=>(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{children:e.charAt(0)}),e.slice(1)]},a)))}),(0,P.jsx)("input",{className:B,value:r.aim,onChange:O,name:"aim",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u044e \u0446\u0435\u043b\u044c"})]}):(0,P.jsxs)("div",{className:w,children:[(0,P.jsx)("h1",{children:t.split(" ").map(((e,a)=>(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{children:e.charAt(0)}),e.slice(1)]},a)))}),i?(0,P.jsx)(o.A,{}):(0,P.jsx)("p",{children:r.aim?r.aim:"\u0426\u0435\u043b\u044c \u0435\u0449\u0435 \u043d\u0435 \u0431\u044b\u043b\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430"})]})]}),!Q&&(0,P.jsxs)("div",{className:f,children:[(0,P.jsx)("button",{onClick:Y,className:h,children:(0,P.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAADH0lEQVR4nO2bu27UQBhGhzQ0FATeIFxCyIWEAPsiFECBQireAEoEEhRIIKBEFLwElwIpSIEeOijoYJNwj0QDCgeZnQKtduzdZcf/eOc7kpvE9vzznfHYuzt2TgghhBBCCCGEEEII4YAZ4AqwBrz125r/24wiigSwD3gI7BBmx+8zGauOLAGm/Ujvl2LfQ9Z1j1P47xmcd8B+6/rHYb5vMzwPrPvQWICjwEZFwL/8Vvb/g9Z9Gcfwd4CrwB6/XSu5OV+27k+jAGb7CH+1x3HXA/s/tulJAwGOAB9Kwv8NXAwcOxm4Cl7X35PMwq8Q8OrvDiIMMAdsDjrtdJ3jRuDYR2XHZQ+d8Lf+M/zVkpvwpeghky7tYmopqXs+cvjFY+iBKKF3FZEibePwC+5HCbxHIamxUTxOltS7AHwc9obrz3GhIvw3wN4ogfcopkkjf6Ei/FGM/KKGw1HCDhTUlJF/rIaRv1lWQxRIg40sw/eF9cQlAuMcfuoCgMWawp+rr1cNEUAn/E9jHX6qAsgl/BQFUE/4W0mEn5oA6gt/3qVCKgKApezCT0UAuYafggA64X/OMnxrAeQevqUA4HgN4X8Bll3KWAhA4dsJQOHbCQCWa5h2vgInXFOoSwDQAr5F/jGleJRdLDk++GNPDgKeRw6/uLKWKtYOtV2OAoAJYNtq2vl3mbrLVMB05PBP9vuOgMtUwLlAMy/qDD9nATcDzdytM/ycBTwLNLMy5A238hNu6O0Yl5sAYJcPrBezQ4z84lH2lHW/miRgKtDED2C3X2a4AtwDXo7qQ5YEeIDTgTB+egn9UjrndyMB1WvvB6GYdlpuACTAAzytO3zfbk9casQulPJl5FHCr6NfIyNmoYRvwFVs+++OWin2q0kCzvYR9ndgHbgDnPevmk6k3K8mCbjVddpinecT/15u8XQ0NYp2Am1LAHDbSzgTM2wJSBB0BdgiAcZIgDESYIwEGCMBxkiAMRJgjAQYIwHGSIAxEmCMBBgjAcZIgDESYEzjBYwrLjXIDJcaZIZLDTLDpQaZ4VKDzHBCCCGEEEIIIYQQQrjR8AfOxJf7CO5mJAAAAABJRU5ErkJggg==",alt:"edit"})}),(0,P.jsxs)("button",{onClick:J,className:_,children:["\u0412\u044b\u0439\u0442\u0438",(0,P.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABfklEQVR4nO2ZS0oDQRiEZ5VjJOJjn4BeIBm9kIoL14oniHoCb+BZTJDExzZifICbwCcNPdpExGGo/mNDFwzZVf1fT3czVIoiKysr618LWAMugUdggUYL73cBdGIOvwe8ElcvQBlr5WMPH0K01QBu21SaAH2gJfJuAQNgGmScK7zDELdHK/Wl5t8ZgyDjXm0eHljJyv/yJj58xrva/EtS4585J8Cb+00SIJoyQE0BG8ABsJnqGRj5mCeglyLATRClgzAE6PnBtRCWhxjoArMg8hnYSeoaRQ2ximsUJcRfAP762weOxM9VmN34TNQAuMVO49QBRjEA1oFj4Ez8XC8N785EVw5geIi3m5qZAqAc3hoA9fAr/pSYNdrzKwQYy4c3BpjIhzcG2AIOXQ+lNja/RqXKADUFnMaqVZIvth4MqsUyyLhTm7vuvtLUhynL3d2lcneo8A5DOr72ttBcXq97iNIAYu5aavnwAUTbvV5Xf4v/YnJ+wygrn5WVlVVY6RNDXSnVfHQVFAAAAABJRU5ErkJggg==",alt:"logout"})]})]})]}),(0,P.jsxs)("div",{className:u,children:[(0,P.jsxs)("div",{className:p,children:[(0,P.jsx)("h2",{children:"\u041e \u0441\u0435\u0431\u0435"}),Q?(0,P.jsx)("textarea",{className:N,value:r.aboutText,name:"aboutText",onChange:O,placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043e \u0441\u0435\u0431\u0435 \u0438 \u043e \u0441\u0432\u043e\u0438\u0445 \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f\u0445"}):i?(0,P.jsx)(o.A,{}):(0,P.jsx)("p",{children:r.aboutText?r.aboutText:"\u041d\u0435\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0441\u0435\u0431\u0435"}),Q&&(0,P.jsx)("button",{className:E,onClick:()=>{Y(),H(r.aim,r.aboutText,U)},children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"})]}),(0,P.jsxs)("div",{className:I,children:[(0,P.jsx)(l.N_,{className:z==="/profile/".concat(a)?b:"",to:"",children:"\u0422\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438"}),(0,P.jsx)(l.N_,{className:z==="/profile/".concat(a,"/articles")?b:"",to:"articles",children:"\u0421\u0442\u0430\u0442\u044c\u0438"})]}),(0,P.jsx)(n.sv,{})]})]})})})};var U=t(604),D=t(3277),y=t(1750);const T=()=>{const e=(0,i.aU)(),a=(0,r.c7)(),t=(0,D.j)(),l=(0,U.A)(),{isAuth:o,username:c,id:A}=l,[d,u]=(0,s.useState)({aim:"",aboutText:""}),[g,m]=(0,s.useState)(""),[x,j]=(0,s.useState)(!1),[v,C]=(0,s.useState)(!1),[f,h]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(async()=>{if(A&&!x)try{C(!0);const a=(0,i.H9)(e,"users","".concat(A)),t=await(0,i.x7)(a);if(t.exists()){const e=t.data(),{aim:a,aboutText:s,avatarUrl:n}=e;u({aim:a,aboutText:s}),m(n)}}finally{C(!1)}})()}),[A,x,e]);return(0,P.jsx)(P.Fragment,{children:o?(0,P.jsx)(Q,{userId:A,username:c,avatarUrl:g,userProfileData:d,isLoading:v,isEdit:x,isUploading:f,onLogOut:()=>{u({aboutText:"",aim:""}),m(""),t((0,y.a1)())},uploadAvatarInStorage:e=>{try{const t=(0,r.KR)(a,"users/avatars/".concat(A,"/").concat(e.name)),s=(0,r.bp)(t,e);s.on("state_changed",(e=>{h(!0)}),(e=>{h(!1)}),(async()=>{const e=await(0,r.qk)(s.snapshot.ref);m(e),h(!1)}))}finally{h(!1)}},updateUser:(e,a)=>{u((t=>({...t,[e]:a})))},toggleEdit:()=>{j(!x)},addUserInfoToFirebase:async(a,s,n)=>{try{if(C(!0),A){const r=(0,i.H9)(e,"users","".concat(A));if(d.aim){await(0,i.mZ)(r,{aim:a,aboutText:s,avatarUrl:n});const t=(0,i.P)((0,i.rJ)(e,"articles"),(0,i._M)("user.username","==",c)),l=await(0,i.GG)(t),o=(0,i.wP)(e);l.forEach((a=>{const t=(0,i.H9)(e,"articles",a.id);o.update(t,{user:{username:c,avatarUrl:n}})})),await o.commit()}else await(0,i.BN)(r,{aim:a,aboutText:s,avatarUrl:n});t((0,y.gV)({...l,avatarUrl:n}))}}finally{C(!1)}}}):(0,P.jsx)(n.C5,{replace:!0,to:"/signin"})})}}}]);
//# sourceMappingURL=596.a510ca1d.chunk.js.map